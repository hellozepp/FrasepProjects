524  %studio_hide_wrapper;
605  %studio_show_only_notes_wrapper;
NOTE: ODS statements in the SAS Studio environment may disable some output features.
608  *options cashost="frasepviya35smp.cloud.com" casport=5570;
609  options set=CASCLIENTDEBUG=1;
610  
611  cas benchsess sessopts=(timeout=3600 metrics=true);
NOTE: The session BENCHSESS connected successfully to Cloud Analytic Services frasepviya35smp.cloud.com using port 5570. The UUID 
      is ee1c3c81-e8e7-2c49-ac09-c5889a43f469. The user is viyademo01 and the active caslib is CASUSER(viyademo01).
NOTE: The SAS option SESSREF was updated with the value BENCHSESS.
NOTE: The SAS macro _SESSREF_ was updated with the value BENCHSESS.
NOTE: The session is using 0 workers.
NOTE: Action 'sessionProp.setSessOpt' used (Total process time):
NOTE:       real time               0.003061 seconds
NOTE:       cpu time                0.003045 seconds (99.48%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  389.38K (0.00%)
NOTE: The CAS statement request to update one or more session options for session BENCHSESS completed.
612  
613  /************************************************************************/
614  /* This example illustrates various tools for assaying, assessing,      */
615  /* modifying and preparing data prior to modeling. It uses HMEQ         */
616  /* dataset as input and produces HMEQ_PREPPED dataset. The HMEQ_PREPPED */
617  /* dataset is used in subsequent examples.                              */
618  /*                                                                      */
619  /* The steps include:                                                   */
620  /*                                                                      */
621  /* (1) PREPARE AND EXPLORE                                              */
622  /*     a) Load data set into CAS                                        */
623  /*     b) Explore                                                       */
624  /*     c) Impute                                                        */
625  /*     d) Identify variables that explain variance                      */
626  /*     e) Perform a cluster analysis to identify homogeneous            */
627  /*        groups in the data                                            */
628  /*     f) Perform principal components analysis to assess collineary    */
629  /*        among candidate, interval valued inputs                       */
630  /************************************************************************/
631  
632  /************************************************************************/
633  /* Setup and initialize for later use in the program                    */
634  /************************************************************************/
635  /* Define a CAS engine libref for CAS in-memory data tables */
636  libname mycaslib cas caslib=casuser;
NOTE: Libref MYCASLIB was successfully assigned as follows: 
      Engine:        CAS 
      Physical Name: ee1c3c81-e8e7-2c49-ac09-c5889a43f469
637  
638  /* Specify the data set names */
639  %let sasdata          = sampsio.hmeq;
640  %let casdata          = mycaslib.hmeq;
641  
642  /* Specify the data set inputs and target */
643  %let class_inputs    = reason job;
644  %let interval_inputs = clage clno debtinc loan mortdue value yoj derog delinq ninq;
645  %let target          = bad;
646  
647  %let im_class_inputs    = reason job;
648  %let im_interval_inputs = im_clage clno im_debtinc loan mortdue value im_yoj im_ninq derog im_delinq;
649  %let cluster_inputs     = im_clage im_debtinc value;
650  
651  /* Specify a folder path to write the temporary output files */
652  %let outdir = &_SASWORKINGDIR;
653  
654  /************************************************************************/
655  /* Load data into CAS if needed. Data should have been loaded in        */
656  /* step 1, it will be loaded here after checking if it exists in CAS    */
657  /************************************************************************/
658  %if not %sysfunc(exist(&casdata)) %then %do;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000908 seconds
NOTE:       cpu time                0.000817 seconds (89.98%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  756.72K (0.00%)
659    proc casutil;
660      load data=&sasdata casout="hmeq" outcaslib=casuser;
661    run;
662  %end;
663  
664  /* Grow volume of input training dataset to 5960000 records */
665  /* On 16 cores, 128 Go : 100:64s / 1000: 416s */
666  
667  data mycaslib.hmeq(drop=i) ;
NOTE: Client is using the oauth identity provider
NOTE: Sent challenge length 1395
NOTE: Received response length 58
NOTE: User viyademo01 connected to CAS using OAuth 2.
668     set mycaslib.hmeq ;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000903 seconds
NOTE:       cpu time                0.000813 seconds (90.03%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  752.34K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000736 seconds
NOTE:       cpu time                0.000659 seconds (89.54%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  752.34K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000967 seconds
NOTE:       cpu time                0.000900 seconds (93.07%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  1.17M (0.00%)
669     do i=1 to 5000 ;
670        output ;
671     end ;
672  run ;

NOTE: Running DATA step in Cloud Analytic Services.
NOTE: Executing action 'sessionProp.getSessOpt'.
NOTE: Action 'sessionProp.getSessOpt' used (Total process time):
NOTE:       real time               0.000231 seconds
NOTE:       cpu time                0.000207 seconds (89.61%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  227.16K (0.00%)
NOTE: Executing action 'sessionProp.setSessOpt'.
NOTE: Action 'sessionProp.setSessOpt' used (Total process time):
NOTE:       real time               0.000250 seconds
NOTE:       cpu time                0.000225 seconds (90.00%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  281.44K (0.00%)
NOTE: The DATA step will run in multiple threads.
NOTE: Executing action 'dataStep.runBinary'.
NOTE: There were 5960 observations read from the table HMEQ in caslib CASUSER(viyademo01).
NOTE: The table hmeq in caslib CASUSER(viyademo01) has 29800000 observations and 13 variables.
NOTE: Action 'dataStep.runBinary' used (Total process time):
NOTE:       real time               1.980474 seconds
NOTE:       cpu time                9.243348 seconds (466.72%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  39.09M (0.03%)
NOTE: Executing action 'sessionProp.setSessOpt'.
NOTE: Action 'sessionProp.setSessOpt' used (Total process time):
NOTE:       real time               0.000396 seconds
NOTE:       cpu time                0.000364 seconds (91.92%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  282.44K (0.00%)
NOTE: DATA statement used (Total process time):
      real time           2.02 seconds
      cpu time            0.00 seconds
      

673  
674  proc cas ;
675     tabledetails / table="hmeq" ;
676  quit ;

NOTE: Active Session now BENCHSESS.
NOTE: Executing action 'table.tableDetails'.
NOTE: Action 'table.tableDetails' used (Total process time):
NOTE:       real time               0.001067 seconds
NOTE:       cpu time                0.001044 seconds (97.84%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  730.06K (0.00%)

NOTE: PROCEDURE CAS used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
      

677  
678  /************************************************************************/
679  /* Explore the data and plot missing values                             */
680  /************************************************************************/
681  proc cardinality data=&casdata outcard=mycaslib.data_card;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000749 seconds
NOTE:       cpu time                0.000725 seconds (96.80%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.50K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000712 seconds
NOTE:       cpu time                0.000674 seconds (94.66%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.50K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000870 seconds
NOTE:       cpu time                0.000853 seconds (98.05%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  869.09K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000452 seconds
NOTE:       cpu time                0.000390 seconds (86.28%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  319.19K (0.00%)
682  run;

NOTE: Executing action 'builtins.loadActionSet'.
NOTE: Added action set 'cardinality'.
NOTE: Action 'builtins.loadActionSet' used (Total process time):
NOTE:       real time               0.148767 seconds
NOTE:       cpu time                0.001216 seconds (0.82%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  229.22K (0.00%)
NOTE: Executing action 'cardinality.summarize'.
NOTE: Writing cardinality.
NOTE: status = 0.
NOTE: The Cloud Analytic Services server processed the request in 8.379557 seconds.
NOTE: Action 'cardinality.summarize' used (Total process time):
NOTE:       real time               8.380997 seconds
NOTE:       cpu time                107.606381 seconds (1283.93%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  3.63M (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.001375 seconds
NOTE:       cpu time                0.001361 seconds (98.98%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  737.28K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.002105 seconds
NOTE:       cpu time                0.002076 seconds (98.62%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  881.84K (0.00%)
NOTE: PROCEDURE CARDINALITY used (Total process time):
      real time           8.54 seconds
      cpu time            0.01 seconds
      

683  
684  proc print data=mycaslib.data_card(where=(_nmiss_>0));
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000804 seconds
NOTE:       cpu time                0.000777 seconds (96.64%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000620 seconds
NOTE:       cpu time                0.000562 seconds (90.65%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000997 seconds
NOTE:       cpu time                0.000845 seconds (84.75%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  877.06K (0.00%)
685    title "Data Summary";
686  run;

NOTE: Executing action 'table.fetch'.
NOTE: Action 'table.fetch' used (Total process time):
NOTE:       real time               0.002028 seconds
NOTE:       cpu time                0.002009 seconds (99.06%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  1.34M (0.00%)
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
      

687  
688  data data_missing;
689    set mycaslib.data_card (where=(_nmiss_>0) keep=_varname_ _nmiss_ _nobs_);
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000789 seconds
NOTE:       cpu time                0.000762 seconds (96.58%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000611 seconds
NOTE:       cpu time                0.000591 seconds (96.73%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.001013 seconds
NOTE:       cpu time                0.000973 seconds (96.05%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  877.06K (0.00%)
690    _percentmiss_ = (_nmiss_/_nobs_)*100;
691    label _percentmiss_ = 'Percent Missing';
692  run;

NOTE: Executing action 'table.fetch'.
NOTE: Action 'table.fetch' used (Total process time):
NOTE:       real time               0.000950 seconds
NOTE:       cpu time                0.000930 seconds (97.89%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  1.30M (0.00%)
NOTE: There were 11 observations read from the data set MYCASLIB.DATA_CARD.
      WHERE _nmiss_>0;
NOTE: The data set WORK.DATA_MISSING has 11 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.03 seconds
      cpu time            0.02 seconds
      

693  
694  proc sgplot data=data_missing;
695    title "Percentage of Missing Values";
696    vbar _varname_ / response=_percentmiss_ datalabel categoryorder=respdesc;
697  run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           10.73 seconds
      cpu time            0.17 seconds
      
NOTE: There were 11 observations read from the data set WORK.DATA_MISSING.

698  title;
699  
700  /************************************************************************/
701  /* Impute missing values                                                */
702  /************************************************************************/
703  proc varimpute data=&casdata;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000729 seconds
NOTE:       cpu time                0.000688 seconds (94.38%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000596 seconds
NOTE:       cpu time                0.000570 seconds (95.64%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000636 seconds
NOTE:       cpu time                0.000615 seconds (96.70%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  866.56K (0.00%)
704    input clage /ctech=mean;
705    input delinq /ctech=median;
706    input ninq /ctech=random;
707    input debtinc yoj /ctech=value cvalues=50,100;
708    output out=mycaslib.hmeq_prepped copyvars=(_ALL_);
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000353 seconds
NOTE:       cpu time                0.000309 seconds (87.54%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  319.38K (0.00%)
709    code file="&outdir./impute_score.sas";
710  run;

NOTE: Using SEED=1949215732 for random imputation.
NOTE: Executing action 'dataPreprocess.transform'.
NOTE: External file 
      /opt/sas/viya/config/var/tmp/compsrv/default/c72f585e-2a43-40f0-9308-eb2b96360ad3/SAS_work5F580000040D_frasepviya35smp.cloud.c
      om/impute_score.sas opened.
NOTE: The procedure wrote the DATA step code to external file 
      /opt/sas/viya/config/var/tmp/compsrv/default/c72f585e-2a43-40f0-9308-eb2b96360ad3/SAS_work5F580000040D_frasepviya35smp.cloud.c
      om/impute_score.sas.
NOTE: Action 'dataPreprocess.transform' used (Total process time):
NOTE:       real time               6.786288 seconds
NOTE:       cpu time                87.362469 seconds (1287.34%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  89.99M (0.07%)
NOTE: The Cloud Analytic Services server processed the request in 6.786288 seconds.
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000695 seconds
NOTE:       cpu time                0.000672 seconds (96.69%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000740 seconds
NOTE:       cpu time                0.000719 seconds (97.16%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  874.06K (0.00%)
NOTE: The data set MYCASLIB.HMEQ_PREPPED has 29800000 observations and 18 variables.
NOTE: PROCEDURE VARIMPUTE used (Total process time):
      real time           6.84 seconds
      cpu time            0.04 seconds
      

711  
712  
713  /************************************************************************/
714  /* Identify variables that explain variance in the target               */
715  /************************************************************************/
716  /* Discriminant analysis for class target */
717  proc varreduce data=mycaslib.hmeq_prepped technique=discriminantanalysis;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000567 seconds
NOTE:       cpu time                0.000549 seconds (96.83%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000567 seconds
NOTE:       cpu time                0.000547 seconds (96.47%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000616 seconds
NOTE:       cpu time                0.000594 seconds (96.43%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  874.06K (0.00%)
718    class &target &im_class_inputs.;
719    reduce supervised &target=&im_class_inputs. &im_interval_inputs. / maxeffects=8;
720    ods output selectionsummary=summary;	
721  run;

NOTE: Executing action 'varReduce.super'.
NOTE: Action 'varReduce.super' used (Total process time):
NOTE:       real time               7.555193 seconds
NOTE:       cpu time                95.809060 seconds (1268.12%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  3.09M (0.00%)
NOTE: The Cloud Analytic Services server processed the request in 7.555193 seconds.
NOTE: The data set WORK.SUMMARY has 8 observations and 9 variables.
NOTE: PROCEDURE VARREDUCE used (Total process time):
      real time           8.08 seconds
      cpu time            0.05 seconds
      

722  
723  data out_iter (keep=Iteration VarExp Base Increment Parameter);
724    set summary;
725    Increment=dif(VarExp);
726    if Increment=. then Increment=0;
727    Base=VarExp - Increment;
728  run;

NOTE: There were 8 observations read from the data set WORK.SUMMARY.
NOTE: The data set WORK.OUT_ITER has 8 observations and 5 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

729  
730  proc transpose data=out_iter out=out_iter_trans;
731    by Iteration VarExp Parameter;
732  run;

NOTE: There were 8 observations read from the data set WORK.OUT_ITER.
NOTE: The data set WORK.OUT_ITER_TRANS has 16 observations and 5 variables.
NOTE: PROCEDURE TRANSPOSE used (Total process time):
      real time           0.06 seconds
      cpu time            0.00 seconds
      

733  
734  proc sort data=out_iter_trans;
735    label _NAME_='Group';
736    by _NAME_;
737  run;

NOTE: There were 16 observations read from the data set WORK.OUT_ITER_TRANS.
NOTE: The data set WORK.OUT_ITER_TRANS has 16 observations and 5 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

738  
739  /* Variance explained by Iteration plot */
740  proc sgplot data=out_iter_trans;
741    title "Variance Explained by Iteration";
742    yaxis label="Variance Explained";
743    vbar Iteration / response=COL1 group=_NAME_;
744  run;

NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           0.17 seconds
      cpu time            0.04 seconds
      
NOTE: There were 16 observations read from the data set WORK.OUT_ITER_TRANS.

745  title;
746  
747  
748  /************************************************************************/
749  /* Perform a cluster analysis based on demographic inputs               */
750  /************************************************************************/
751  proc kclus data=mycaslib.hmeq_prepped standardize=std distance=euclidean maxclusters=6;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000815 seconds
NOTE:       cpu time                0.000792 seconds (97.18%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  738.78K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000578 seconds
NOTE:       cpu time                0.000547 seconds (94.64%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  735.88K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000636 seconds
NOTE:       cpu time                0.000603 seconds (94.81%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  872.28K (0.00%)
752    input &cluster_inputs. / level=interval;
753  run;

NOTE: Executing action 'clustering.kClus'.
NOTE: Using SEED=86829930.
NOTE: Running for input data for K 6.
NOTE: Clustering is finished. MAXITER is satisfied.
NOTE: Action 'clustering.kClus' used (Total process time):
NOTE:       real time               12.592890 seconds
NOTE:       cpu time                146.836620 seconds (1166.03%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  1.56G (1.24%)
NOTE: The Cloud Analytic Services server processed the request in 12.59289 seconds.
NOTE: PROCEDURE KCLUS used (Total process time):
      real time           12.82 seconds
      cpu time            0.06 seconds
      

754  
755  
756  /************************************************************************/
757  /* Perform a principal components analysis on the interval valued       */
758  /* input variables                                                      */
759  /************************************************************************/
760  proc pca data=mycaslib.hmeq_prepped plots=(scree);
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000991 seconds
NOTE:       cpu time                0.000970 seconds (97.88%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.75K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000567 seconds
NOTE:       cpu time                0.000549 seconds (96.83%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  737.66K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000651 seconds
NOTE:       cpu time                0.000622 seconds (95.55%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  871.25K (0.00%)
761    var &im_interval_inputs;
762  run;

NOTE: Executing action 'pca.eig'.
WARNING: 5690000 observations in table HMEQ_PREPPED omitted due to missing values.
NOTE: Action 'pca.eig' used (Total process time):
NOTE:       real time               0.675106 seconds
NOTE:       cpu time                8.416618 seconds (1246.71%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  4.59M (0.00%)
NOTE: The Cloud Analytic Services server processed the request in 0.675106 seconds.
NOTE: PROCEDURE PCA used (Total process time):
      real time           1.43 seconds
      cpu time            0.12 seconds
      

763  
764  
765  
766  /************************************************************************/
767  /* This example illustrates fitting and comparing several Machine       */
768  /* Learning algorithms for predicting the binary target in the          */
769  /* HMEQ data set. The steps include:                                    */
770  /*                                                                      */
771  /* (1) PREPARE AND EXPLORE                                              */
772  /*     a) Check data is loaded into CAS                                 */
773  /*                                                                      */
774  /* (2) PERFORM SUPERVISED LEARNING                                      */
775  /*     a) Fit a model using a Random Forest                             */
776  /*     b) Fit a model using Gradient Boosting                           */
777  /*     c) Fit a model using a Neural Network                            */
778  /*     d) Fit a model using a Support Vector Machine                    */
779  /*                                                                      */
780  /* (3) EVALUATE AND IMPLEMENT                                           */
781  /*     a) Score the data                                                */
782  /*     b) Assess model performance                                      */
783  /*     c) Generate ROC and Lift charts                                  */
784  /************************************************************************/
785  
786  /************************************************************************/
787  /* Setup and initialize for later use in the program                    */
788  /************************************************************************/
789  
790  /* Define a CAS engine libref for CAS in-memory data tables */
791  libname mycaslib cas caslib=casuser;
NOTE: Libref MYCASLIB was successfully assigned as follows: 
      Engine:        CAS 
      Physical Name: ee1c3c81-e8e7-2c49-ac09-c5889a43f469
792  
793  /* Specify the data set names */
794  %let casdata          = mycaslib.hmeq_prepped;
795  %let partitioned_data = mycaslib.hmeq_part;
796  
797  /* Specify the data set inputs and target */
798  %let class_inputs    = reason job;
799  %let interval_inputs = im_clage clno im_debtinc loan mortdue value im_yoj im_ninq derog im_delinq;
800  %let target          = bad;
801  
802  
803  /************************************************************************/
804  /* Check if HMEQ_PREPPED data created in the Prepare and Explore Data   */
805  /* snippet exists.  If not, print error message to run the program.     */
806  /************************************************************************/
807  %if not %sysfunc(exist(&casdata)) %then %do;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000564 seconds
NOTE:       cpu time                0.000543 seconds (96.28%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  736.66K (0.00%)
808    %put ERROR: The input dataset HMEQ_PREPPED is not loaded into CAS.;
809    %put ERROR: Remember to run the Prepare and Explore Data snippet to load necessary data before executing this example.;
810  %end;
811  
812  /************************************************************************/
813  /* Partition the data into training and validation                      */
814  /************************************************************************/
815  proc partition data=&casdata partition samppct=70;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000581 seconds
NOTE:       cpu time                0.000563 seconds (96.90%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.34K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000504 seconds
NOTE:       cpu time                0.000483 seconds (95.83%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.34K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000638 seconds
NOTE:       cpu time                0.000622 seconds (97.49%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  868.25K (0.00%)
816    by &target;
817    output out=&partitioned_data copyvars=(_ALL_);
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000336 seconds
NOTE:       cpu time                0.000290 seconds (86.31%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  311.09K (0.00%)
818  run;

NOTE: Executing action 'sampling.stratified'.
NOTE: Stratified sampling is in effect.
NOTE: Using SEED=812859426 for sampling.
NOTE: Action 'sampling.stratified' used (Total process time):
NOTE:       real time               4.872429 seconds
NOTE:       cpu time                55.225519 seconds (1133.43%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  96.15M (0.07%)
NOTE: The Cloud Analytic Services server processed the request in 4.872429 seconds.
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000832 seconds
NOTE:       cpu time                0.000810 seconds (97.36%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  733.75K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000885 seconds
NOTE:       cpu time                0.000838 seconds (94.69%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  865.94K (0.00%)
NOTE: The data set MYCASLIB.HMEQ_PART has 29800000 observations and 19 variables.
NOTE: PROCEDURE PARTITION used (Total process time):
      real time           5.08 seconds
      cpu time            0.01 seconds
      

819  
820  
821  /************************************************************************/
822  /* RANDOM FOREST predictive model                                       */
823  /************************************************************************/
824  proc forest data=&partitioned_data ntrees=50 intervalbins=20 minleafsize=5
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000684 seconds
NOTE:       cpu time                0.000647 seconds (94.59%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  736.75K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000796 seconds
NOTE:       cpu time                0.000756 seconds (94.97%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  733.75K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000822 seconds
NOTE:       cpu time                0.000797 seconds (96.96%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  865.94K (0.00%)
825              outmodel=mycaslib.forest_model;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000393 seconds
NOTE:       cpu time                0.000349 seconds (88.80%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  310.50K (0.00%)
826    input &interval_inputs. / level = interval;
827    input &class_inputs. / level = nominal;
828    target &target / level=nominal;
829    partition rolevar=_partind_(train='1' validate='0');
830  run;

NOTE: Using SEED=57816620 for FOREST model building.
NOTE: Executing action 'decisionTree.forestTrain'.
NOTE: Action 'decisionTree.forestTrain' used (Total process time):
NOTE:       real time               311.606198 seconds
NOTE:       cpu time                4033.612404 seconds (1294.46%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  11.94G (9.50%)
NOTE: The Cloud Analytic Services server processed the request in 311.606198 seconds.
NOTE: Executing action 'decisionTree.forestScore'.
NOTE: Action 'decisionTree.forestScore' used (Total process time):
NOTE:       real time               126.399813 seconds
NOTE:       cpu time                1812.039985 seconds (1433.58%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  566.07M (0.44%)
NOTE: The Cloud Analytic Services server processed the request in 126.399813 seconds.
NOTE: Executing action 'decisionTree.forestScore'.
NOTE: Action 'decisionTree.forestScore' used (Total process time):
NOTE:       real time               53.927506 seconds
NOTE:       cpu time                781.162561 seconds (1448.54%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  566.07M (0.44%)
NOTE: The Cloud Analytic Services server processed the request in 53.927506 seconds.
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000761 seconds
NOTE:       cpu time                0.000737 seconds (96.85%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.34K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.001359 seconds
NOTE:       cpu time                0.001339 seconds (98.53%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  875.44K (0.00%)
NOTE: The data set MYCASLIB.FOREST_MODEL has 49026 observations and 42 variables.
NOTE: PROCEDURE FOREST used (Total process time):
      real time           8:12.57
      cpu time            0.41 seconds
      

831  
832  
833  /************************************************************************/
834  /* Score the data using the generated RF model                          */
835  /************************************************************************/
836  proc forest data=&partitioned_data inmodel=mycaslib.forest_model noprint;
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000629 seconds
NOTE:       cpu time                0.000592 seconds (94.12%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.34K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000611 seconds
NOTE:       cpu time                0.000564 seconds (92.31%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.34K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000707 seconds
NOTE:       cpu time                0.000691 seconds (97.74%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  865.34K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000780 seconds
NOTE:       cpu time                0.000759 seconds (97.31%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.34K (0.00%)
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000569 seconds
NOTE:       cpu time                0.000537 seconds (94.38%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  734.34K (0.00%)
NOTE: Executing action 'table.columnInfo'.
NOTE: Action 'table.columnInfo' used (Total process time):
NOTE:       real time               0.000902 seconds
NOTE:       cpu time                0.000881 seconds (97.67%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  875.44K (0.00%)
837    output out=mycaslib._scored_RF copyvars=(_ALL_);
NOTE: Executing action 'table.tableInfo'.
NOTE: Action 'table.tableInfo' used (Total process time):
NOTE:       real time               0.000387 seconds
NOTE:       cpu time                0.000345 seconds (89.15%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  311.09K (0.00%)
838  run;

NOTE: When the INMODEL option is specified, only the DATA option, the NOPRINT option, and the OUTPUT and CODE statements are 
      supported.
NOTE: Executing action 'decisionTree.forestScore'.
NOTE: Action 'decisionTree.forestScore' used (Total process time):
NOTE:       real time               194.171316 seconds
NOTE:       cpu time                2809.384325 seconds (1446.86%)
NOTE:       total nodes             1 (16 cores)
NOTE:       total memory            125.75G
NOTE:       memory                  565.96M (0.44%)
NOTE: The Cloud Analytic Services server processed the request in 194.171316 seconds.
NOTE: PROCEDURE FOREST used (Total process time):
      real time           4:17.87
      cpu time            0.82 seconds
      

839  
840  
841  /************************************************************************/
842  /* GRADIENT BOOSTING MACHINES predictive model                          */
843  /************************************************************************/
844  proc gradboost data=&partitioned_data ntrees=10 intervalbins=20 maxdepth=5
ERROR: Session  is disconnected. There is no server connection to execute the action.
845                 outmodel=mycaslib.gb_model;
ERROR: Session  is disconnected. There is no server connection to execute the action.
846    input &interval_inputs. / level = interval;
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
847    input &class_inputs. / level = nominal;
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
848    target &target / level=nominal;
ERROR: No data set open to look up variables.
849    partition rolevar=_partind_(train='1' validate='0');
ERROR: No data set open to look up variables.
850  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE GRADBOOST used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
851  
852  
853  /************************************************************************/
854  /* Score the data using the generated GBM model                         */
855  /************************************************************************/


856  proc gradboost  data=&partitioned_data inmodel=mycaslib.gb_model noprint;
ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: Session  is disconnected. There is no server connection to execute the action.
857    output out=mycaslib._scored_GB copyvars=(_ALL_);
ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: No data set open to look up variables.
858  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE GRADBOOST used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
859  
860  
861  /************************************************************************/
862  /* NEURAL NETWORK predictive model                                      */
863  /************************************************************************/


864  proc nnet data=&partitioned_data;
ERROR: Session  is disconnected. There is no server connection to execute the action.
865    target &target / level=nom;
ERROR: No data set open to look up variables.
866    input &interval_inputs. / level=int;
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
867    input &class_inputs. / level=nom;
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
868    hidden 2;
869    train outmodel=mycaslib.nnet_model;
ERROR: Session  is disconnected. There is no server connection to execute the action.
870    partition rolevar=_partind_(train='1' validate='0');
ERROR: No data set open to look up variables.
871    ods exclude OptIterHistory;
872  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE NNET used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
873  
874  
875  /************************************************************************/
876  /* Score the data using the generated NN model                          */
877  /************************************************************************/


878  proc nnet data=&partitioned_data inmodel=mycaslib.nnet_model noprint;
ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: Session  is disconnected. There is no server connection to execute the action.
879    output out=mycaslib._scored_NN copyvars=(_ALL_);
ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: No data set open to look up variables.
880  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE NNET used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
881  
882  
883  /************************************************************************/
884  /* SUPPORT VECTOR MACHINE predictive model                              */
885  /************************************************************************/


886  proc svmachine data=&partitioned_data(where=(_partind_=1));
ERROR: Session  is disconnected. There is no server connection to execute the action.
887    kernel polynom / deg=2;
888    target &target;
ERROR: No data set open to look up variables.
889    input &interval_inputs. / level=interval;
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
890    input &class_inputs. / level=nominal;
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
891    id bad _partind_;
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
892    savestate rstore=mycaslib.svm_astore_model;
ERROR: Session  is disconnected. There is no server connection to execute the action.
893    ods exclude IterHistory;
894  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SVMACHINE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
895  
896  
897  /************************************************************************/
898  /* Score data using ASTORE code generated for the SVM model             */
899  /************************************************************************/


900  proc astore;
901    score data=&partitioned_data out=mycaslib._scored_SVM
ERROR: Session  is disconnected. There is no server connection to execute the action.
902          rstore=mycaslib.svm_astore_model;
ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: Session  is disconnected. There is no server connection to execute the action.
903  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE ASTORE used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
904  
905  
906  /************************************************************************/
907  /* Assess                                                               */
908  /************************************************************************/
909  %macro assess_model(prefix=, var_evt=, var_nevt=);
910  proc assess data=mycaslib._scored_&prefix.(where=(_partind_=0));
911      input &var_evt.;
912      target &target / level=nominal event='1';
913      fitstat pvar=&var_nevt. / pevent='0';
914  
915      ods output
916        fitstat=&prefix._fitstat
917        rocinfo=&prefix._rocinfo
918        liftinfo=&prefix._liftinfo;
919  run;
920  %mend assess_model;
921  
922  ods exclude all;
923  %assess_model(prefix=RF, var_evt=p_&target.1, var_nevt=p_&target.0);


ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE ASSESS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
WARNING: Output 'liftinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'rocinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'fitstat' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
924  %assess_model(prefix=SVM, var_evt=p_&target.1, var_nevt=p_&target.0);


ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE ASSESS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
WARNING: Output 'liftinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'rocinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'fitstat' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
925  %assess_model(prefix=GB, var_evt=p_&target.1, var_nevt=p_&target.0);


ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE ASSESS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
WARNING: Output 'liftinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'rocinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'fitstat' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
926  %assess_model(prefix=NN, var_evt=p_&target.1, var_nevt=p_&target.0);


ERROR: Session  is disconnected. There is no server connection to execute the action.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
ERROR: No data set open to look up variables.
NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE ASSESS used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
WARNING: Output 'liftinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'rocinfo' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
WARNING: Output 'fitstat' was not created.  Make sure that the output object name, label, or path is spelled correctly.  Also, 
         verify that the appropriate procedure options are used to produce the requested output object.  For example, verify that 
         the NOPRINT option is not used.
927  ods exclude none;
928  
929  
930  /************************************************************************/
931  /* ROC and Lift Charts using validation data                            */
932  /************************************************************************/
933  ods graphics on;
934  


935  data all_rocinfo;
936    set SVM_rocinfo(in=s)
937        GB_rocinfo(in=g)
938        NN_rocinfo(in=n)
939        RF_rocinfo(in=f);
ERROR: File WORK.SVM_ROCINFO.DATA does not exist.
ERROR: File WORK.GB_ROCINFO.DATA does not exist.
ERROR: File WORK.NN_ROCINFO.DATA does not exist.
ERROR: File WORK.RF_ROCINFO.DATA does not exist.
940  
941    length model $ 16;
942    select;
943      when (s) model='SVM';
944      when (f) model='Forest';
945      when (g) model='GradientBoosting';
946      when (n) model='NeuralNetwork';
947    end;
948  run;

NOTE: The SAS System stopped processing this step because of errors.
WARNING: The data set WORK.ALL_ROCINFO may be incomplete.  When this step was stopped there were 0 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

949  
950  data all_liftinfo;
951    set SVM_liftinfo(in=s)
952        GB_liftinfo(in=g)
953        NN_liftinfo(in=n)
954        RF_liftinfo(in=f);
ERROR: File WORK.SVM_LIFTINFO.DATA does not exist.
ERROR: File WORK.GB_LIFTINFO.DATA does not exist.
ERROR: File WORK.NN_LIFTINFO.DATA does not exist.
ERROR: File WORK.RF_LIFTINFO.DATA does not exist.
955  
956    length model $ 16;
957    select;
958      when (s) model='SVM';
959      when (f) model='Forest';
960      when (g) model='GradientBoosting';
961      when (n) model='NeuralNetwork';
962    end;
963  run;

NOTE: The SAS System stopped processing this step because of errors.
WARNING: The data set WORK.ALL_LIFTINFO may be incomplete.  When this step was stopped there were 0 observations and 1 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

964  
965  /* Print AUC (Area Under the ROC Curve) */
966  title "AUC (using validation data) ";
967  proc sql;
968    select distinct model, c from all_rocinfo order by c desc;
ERROR: The following columns were not found in the contributing tables: c.
NOTE: PROC SQL set option NOEXEC and will continue to check the syntax of statements.
969  quit;
NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SQL used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
      
970  
971  /* Draw ROC charts */


972  proc sgplot data=all_rocinfo aspect=1;
973    title "ROC Curve (using validation data)";
974    xaxis values=(0 to 1 by 0.25) grid offsetmin=.05 offsetmax=.05;
975    yaxis values=(0 to 1 by 0.25) grid offsetmin=.05 offsetmax=.05;
976    lineparm x=0 y=0 slope=1 / transparency=.7;
977    series x=fpr y=sensitivity / group=model;
ERROR: Variable FPR not found.
ERROR: Variable SENSITIVITY not found.
978  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
979  
980  /* Draw lift charts */


981  proc sgplot data=all_liftinfo;
982    title "Lift Chart (using validation data)";
983    yaxis label=' ' grid;
984    series x=depth y=lift / group=model markers markerattrs=(symbol=circlefilled);
ERROR: Variable DEPTH not found.
ERROR: Variable LIFT not found.
985  run;

NOTE: The SAS System stopped processing this step because of errors.
NOTE: PROCEDURE SGPLOT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      
986  
987  title;
988  ods graphics off;
989  
990  cas benchsess terminate;
NOTE: Libref MYCASLIB has been deassigned.
NOTE: Deletion of the session BENCHSESS was successful.
NOTE: The default CAS session BENCHSESS identified by SAS option SESSREF= was terminated. Use the OPTIONS statement to set the 
      SESSREF= option to an active session.
NOTE: Request to TERMINATE completed for session BENCHSESS.
991  
992  
993  
994  
995  
996  %studio_hide_wrapper;

