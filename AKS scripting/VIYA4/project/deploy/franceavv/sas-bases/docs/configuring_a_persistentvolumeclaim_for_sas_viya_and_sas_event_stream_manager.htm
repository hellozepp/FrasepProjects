<html>
    <head>
        <link rel="stylesheet" type="text/css" href="sas.css"/>
        <title>Configuring a PersistentVolumeClaim for SAS Viya and SAS Event Stream Manager</title>
    </head>
    <body>
        <h1 id="configuring-a-persistentvolumeclaim-for-sas-viya-and-sas-event-stream-manager">Configuring a PersistentVolumeClaim for SAS Viya and SAS Event Stream Manager</h1>
<h2 id="overview">Overview</h2>
<p>To configure SAS Event Stream Manager to apply a PersistentVolumeClaim (PVC) 
when deploying an ESP project in conjunction with the ESP operator, 
an environment variable must be set with the name of the PVC. The PVC is 
created by SAS Event Stream Processing Studio.</p>
<p>The transformer adds the following environment variable:</p>
<p>SAS_ESP_COMMON_KUBERNETES_DEFAULTS_PERSISTENTVOLUMECLAIM</p>
<p>The environment variable has the following value:</p>
<p>sas-event-stream-processing-studio-app</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>You must create the sas-event-stream-processing-studio-app PVC by applying 
the configuration that can be found in the following location:</p>
<p>$deploy/sas-bases/examples/sas-event-stream-processing-studio-app/pvc</p>
<h2 id="installation">Installation</h2>
<p>In the base kustomization.yaml file in the $deploy directory, add 
sas-bases/overlays/sas-event-stream-manager-app/pvc/pvc-transformer.yaml to the 
transformers block. The reference should look like this:</p>
<pre class="highlight"><code>...
transformers:
...
- sas-bases/overlays/sas-event-stream-manager-app/pvc/pvc-transformer.yaml
...</code></pre>

<p>After the base kustomization.yaml file is modified, deploy the software using 
the commands described in <a href="http://documentation.sas.com/?cdcId=itopscdc&amp;cdcVersion=default&amp;docsetId=dplyml0phy0dkr&amp;docsetTarget=titlepage.htm">SAS Viya Deployment Guide</a>.</p>
    </body>
</html>